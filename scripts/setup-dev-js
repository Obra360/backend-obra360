const { execSync } = require('child_process');
const fs = require('fs');
const path = require('path');

// Check if .env.development exists
const envPath = path.join(__dirname, '..', '.env.development');
if (!fs.existsSync(envPath)) {
  console.log('Creating .env.development from .env.example...');
  const examplePath = path.join(__dirname, '..', '.env.example');
  fs.copyFileSync(examplePath, envPath);
  console.log('Please update .env.development with your local database credentials');
  process.exit(0);
}

// Run Prisma migrations
console.log('Running database migrations...');
execSync('npx prisma migrate dev', { stdio: 'inherit' });

console.log('Generating Prisma client...');
execSync('npx prisma generate', { stdio: 'inherit' });

console.log('Setup complete!');